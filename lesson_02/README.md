# rd_DataEngineering

Написати джобу, яка витягує всі дані продажів з API та зберігає їх у raw-директорію:

➡️ як шаблон для джоби використати код у папці:

➡️ API доступна за адресою:

  1. Секретний токен до API:
  2. Приклад, як діставати дані з API: [link]
  3. Секретний токен в жодному разі не можна зберігати в коді, він обовʼязково має зберігатися у змінній середовища з назвою AUTH_TOKEN
  4. У файлі main.py має бути реалізований WEB-сервер за допомогою фреймворку Flask, який працює локально і приймає команди у вигляді POST-запитів на порт 8081
  5. Сервер має приймати JSON-обʼєкт такого вигляду: [link]
  6. Шлях зберігання повинен мати вигляд:
  . Цей шлях треба подавати у вигляді параметра raw_dir для джоби
  7. Джоба обовʼязково має бути ідемпотентною. Для цього джоба сама має очищати вміст директорії raw_dir перед записом нових файлів.
  8. Кожну «сторінку» з API можна зберігати в окремому файлі або всі сторінки — в одному великому JSON. Файл повинен мати імʼя sales_2022-08-09.json або sales_2022-08-09_1.json, sales_2022-08-09_2.json тощо, якщо файлів декілька.

3. Написати джобу, яка JSON-файли з raw-директорії записує в stg-директорію в форматі Avro. Всі умови залишаються з попередньої джоби, окрім:

  1. Джоба має запускатися POST-запитом на localhost:8082 з 2 параметрами в JSON: raw_dir та stg_dir
  2. stg_dir повинна мати вигляд:
  3. raw_dir повинна мати такий самий вигляд, як і для першої джоби
  4. Як шаблон для коду можна модифікувати код з першої джоби
  5. Потрібно використати бібліотеку fastavro

4. Самостійно перевірити, чи обидві джоби працюють коректно, можна таким чином:

  1. Запустити Flask-сервер першої джоби в одному терміналі, а другої джоби — в іншому. Зверніть увагу, що сервери обох джоб мають працювати на різних портах.
  2. Запустити скрипт для перевірки: [link]
  3. Якщо скрипт не впав, а відпрацював коректно, це свідчить, що код не має синтаксичних помилок
  4. Перевірити правильність обох джоб можна, переглянувши файли в raw та stg директоріях
  5. Результат повинен мати такий вигляд, якщо ви зберігали всі дані в одному файлі (тут коренева директорія називається file_storage, ви можете обрати іншу назву, внутрішні директорії та імена файлів повинні мати такий самий вигляд):



або так, якщо ви зберігали кожну «сторінку» в окремому файлі:


5. Створити пул-реквест (надалі — PR), лектора призначити ревʼювером PR. Лінку на PR прикріпити в LMS до цього уроку.

6. Вітаю, ви побудували перший в житті data pipeline!
